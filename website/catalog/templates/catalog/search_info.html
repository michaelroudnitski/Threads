{% extends 'catalog/base.html'%}
{% block title %} Search For: {{ search_query }} {% endblock %}


{% block body %}
<div class="container">
    <div class="page-header">
        <h2> Search Results For "{{ search_query }}"</h2>
        <h3> Filtering by</h3>

        <div class="row">
            <div class="col-md-2">
                <p id = "sex_sel"></p>
            </div>
            <div class="col-md-2">
                <p id = "cat_sel"></p>
            </div>
            <div class="col-md-2">
                <p id = "size_sel"></p>
            </div>
        </div>


        <script>
            var selected_sex = "{{selected_sex}}"
            var selected_cat = "{{category}}"
            var selected_size ="{{ size }}"

            var size_dict = {'stockXL': 'Extra Large', 'stockL': "Large", 'stockM': "Medium", 'stockS': "Small"};
            if (selected_sex==='m'){
                document.getElementById("sex_sel").innerHTML = 'Sex: Mens';
            }
            else if (selected_sex==='w') {
                document.getElementById("sex_sel").innerHTML = 'Sex: Womens';
            }
            else{
                document.getElementById("sex_sel").innerHTML = 'Sex: All';
            }
            if (selected_cat === "all_products"){
                document.getElementById("cat_sel").innerHTML = 'Categories: All';
            }
            else {
                document.getElementById("cat_sel").innerHTML = 'Categories: '+selected_cat;
            }
            if (selected_size === "all_size"){
                document.getElementById("size_sel").innerHTML = 'Size: All';
            }
            else {
                document.getElementById("size_sel").innerHTML = 'Size: '+ size_dict[selected_size];
            }
        </script>
    </div>
    <div class="row">
        <div class="col-md-2" style="border-right: 1px solid #e7e7e7;">
            <h4>Filter By</h4>
            <br>

            <h5>Sex</h5>

            <div class="row">
                <ul style="list-style-type:none;">
                    <a href="{% url 'catalog:search' sex='mw' category=category size=size page=1%}?q={{ request.GET.q }}"> All </a>
                    <a href="{% url 'catalog:search' sex='m' category=category size=size page=1 %}?q={{ request.GET.q }}"><li>Mens</li></a>
                    <a href="{% url 'catalog:search' sex='w' category=category size=size page=1 %}?q={{ request.GET.q }}"><li>Womens</li></a>
                </ul>
            </div>
            <br>

            <h5>Categories</h5>

            <div class="row">
                <ul style="list-style-type:none;">
                    <a href="{% url 'catalog:search' sex=selected_sex category='all_products' size=size page=1%}?q={{ request.GET.q }}"> All </a>
                    {% for cat in categories %}
                        <a href="{% url 'catalog:search' sex=selected_sex category=cat size=size page=1 %}?q={{ request.GET.q }}"><li>{{ cat }}</li></a>
                    {% endfor %}
                </ul>
            </div>

            <h5>Sizes</h5>

            <div class="row">
                <ul style="list-style-type:none;">
                    <a href="{% url 'catalog:search' sex=selected_sex category='all_products' size='all_size' page=1%}?q={{ request.GET.q }}"> All </a>
                    {% for size in sizes %}
                        <a href="{% url 'catalog:search' sex=selected_sex category='all_products' size=size page=1%}?q={{ request.GET.q }}"><li>{{ size }}</li></a>
                    {% endfor %}
                </ul>
            </div>

        </div>
        <div class="col-md-4">
            <table class="table">
                <tbody>
                    {% for product in queryset_list %}
                        <tr>
                            <td style="width: 200px;"><a href="{% url 'catalog:prod' p_id=product.id %}">
                                    <img src={{product.image}} style="width: 132px; height: 132px;">
                            </a></td>
                            <td style="vertical-align: middle;"><a href="{% url 'catalog:prod' p_id=product.id %}">
                                <h4>{{ product.name }} </h4></a>
                                <p>{{ product.category }}</p>
                                <h5>${{ product.price }}</h5>
                            </td>
                        </tr>
                    {% endfor %}
                    <h1>{{ search_message}}</h1>
                </tbody>
            </table>
        </div>
    </div>
    <nav aria-label="Page navigation" style="margin-left:200px;">
        <ul class="pagination">
            {% for no in list_page %}
                <li><a href="{% url 'catalog:search' sex=selected_sex category='all_products' size='all_size' page=no%}?q={{ request.GET.q }}">{{ no }}</a></li>
            {% endfor %}
        </ul>
    </nav>
</div>
{% endblock %}

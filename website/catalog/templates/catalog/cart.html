{% extends 'catalog/base.html'%}
{% block title %}My Cart{% endblock %}

{% block body %}
<div class="container">
    <div class="page-header">
        {% if user.first_name %}
            <h1>{{user.first_name}}'s Cart</h1>
        {% else %}
            <h1>Your Cart | You must be logged in to checkout</h1>

        {% endif %}
    </div>
    {% if cart_items %}
    <div class="col-md-9">
        <table class="table">
            <tbody>
                <tr>
                    <td>Item</td>
                    <td>Size</td>
                    <td>Quantity</td>
                    <td>Price</td>
                    <td>Remove</td>
                </tr>
                {% for key, value in cart_items.iteritems %}
                    <tr>
                        <td style="width: 200px;"><a href="{% url 'catalog:prod' p_id=key %}">
                            <h4>{{ value.1}}</h4>
                            <img class="thumbnail" src={{value.0}} style="width: 132px; height: 132px; object-fit: cover;">
                        </a></td>
                        <td>
                            <h4>{{ value.3}}</h4>
                        </td>
                        <td>
                            <h4>{{ value.4}}</h4>
                        </td>
                        <td>
                            <h4>{{ value.2}}</h4>
                        </td>
                        <td>
                            <form method="post">
                                {% csrf_token %}
                                <input type="hidden" name="p_id" value={{key}}>
                                <input type="submit" name="remove_from_cart" class="btn btn-danger" onclick="alert('Item removed from cart')" value="REMOVE"></td>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    {% else %}
        Your shopping cart is empty
    {% endif %}
</div>
{% endblock %}
